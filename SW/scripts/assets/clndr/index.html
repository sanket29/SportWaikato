<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Calendar</title>

		<link href="/CMSPages/GetResource.ashx?stylesheetname=SW-Base" type="text/css" rel="stylesheet" />
		<link href="/CMSPages/GetResource.ashx?stylesheetname=SW-Type" type="text/css" rel="stylesheet" />
		<link href="/CMSPages/GetResource.ashx?stylesheetname=SW-SiteElements" type="text/css" rel="stylesheet" />
	</head>
	<body>
		<div class="weekly-calendar">
		</div>

		<script type="text/template" id="clndr_template">
			<div class="controls">
				<button class="clndr-previous-button">Prev.</button>
				<div class="month"><%= days[extras.currentWeek * 7].date.format('YYYY-MM-DD') %> - <%= days[extras.currentWeek * 7 + 6].date.format('YYYY-MM-DD') %></div>
				<button class="clndr-next-button">Next</button>
			</div>

			<div class="days clearfix">
				<% for(var i = extras.currentWeek * 7; i < extras.currentWeek * 7 + 7; i++) { %>
					<% var dayObject = days[i]; %>
					<% console.log(dayObject, dayObject.date.lang().weekdaysMin(dayObject.date)); %>
					<div class="<%= dayObject.classes %>" id="<%= dayObject.id %>">
						<%= dayObject.day %>
						<br />
						<% if (dayObject.events.length) { %>
							Events found:<br />

						<% _.each(dayObject.events, function(event) { %> 
								title: <%= event.Name %>
						<br />
						start date: <%= moment(event.StartDate).fromNow() %>
						<br />
						end date: <%= event.EndDate %>
							<% }) %>
						<% } %>
						<hr />
					</div>
				<% } %>
			</div>
		</script>

		<script type="text/javascript" src="/sw/scripts/lib/ajax/ajax.js"></script>
		<script type="text/javascript" src="/CMSPages/Webservice.asmx/js"></script>

		<script data-main="/sw/scripts/main.js" src="/sw/scripts/lib/require/require.js"></script>
	</body>
</html>